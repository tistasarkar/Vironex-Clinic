window.addEventListener('load', function() {
  const loader = document.getElementById('loader');
  if (loader) {
    loader.style.opacity = '0';
    setTimeout(() => { loader.style.display = 'none'; }, 400);
  }
});

function toggleMenu() {
  const navLinks = document.querySelector('.nav-links');
  if (navLinks) {
    navLinks.classList.toggle('show');
  }
}

(function() {
  const darkToggle = document.getElementById('darkToggle');
  const body = document.body;
  const isDarkMode = localStorage.getItem('clinic-dark');
  if (isDarkMode === '1') {
    body.classList.add('dark');
  }
  if (darkToggle) {
    darkToggle.addEventListener('click', function() {
      body.classList.toggle('dark');
      localStorage.setItem('clinic-dark', body.classList.contains('dark') ? '1' : '0');
    });
  }
})();

document.addEventListener('DOMContentLoaded', function() {
  const aosElements = document.querySelectorAll('[data-aos="fade-up"]');
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('aos-animate');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });
  aosElements.forEach(el => observer.observe(el));

  document.querySelectorAll('.accordion-item').forEach(item => {
    item.addEventListener('click', function() {
      const content = this.querySelector('.accordion-content');
      const isExpanded = content.style.maxHeight && content.style.maxHeight !== '0px';

      document.querySelectorAll('.accordion-content').forEach(el => el.style.maxHeight = null);

      if (!isExpanded) {
        content.style.maxHeight = content.scrollHeight + 'px';
      }
    });
  });
});